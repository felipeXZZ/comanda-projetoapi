{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TopbarComponent } from '../../admin-area/topbar/topbar.component';\nlet OrderTrackerComponent = class OrderTrackerComponent {\n  pedidoService;\n  pedidos = [];\n  isLoading = false;\n  error = null;\n  pedidosSub;\n  constructor(pedidoService) {\n    this.pedidoService = pedidoService;\n  }\n  ngOnInit() {\n    this.isLoading = true;\n    // Escuta o BehaviorSubject com todos os pedidos\n    this.pedidosSub = this.pedidoService.pedidos$.subscribe({\n      next: data => {\n        this.pedidos = data.sort((a, b) => b.id > a.id ? 1 : -1);\n        this.isLoading = false;\n      },\n      error: err => {\n        console.error('Erro ao carregar pedidos:', err);\n        this.error = 'N√£o foi poss√≠vel carregar os pedidos.';\n        this.isLoading = false;\n      }\n    });\n    // Carrega todos os pedidos inicialmente\n    this.pedidoService.loadAllPedidos();\n  }\n  ngOnDestroy() {\n    if (this.pedidosSub) this.pedidosSub.unsubscribe();\n  }\n  formatarStatus(status) {\n    if (!status) return 'Status indefinido';\n    switch (status) {\n      case 'RECEBIDO':\n        return 'üìù Pedido Recebido';\n      case 'EM_PREPARO':\n        return 'üë®‚Äçüç≥ Em Preparo';\n      case 'PRONTO':\n        return '‚úÖ Pronto';\n      case 'SAIU_PARA_ENTREGRA':\n        return 'üöö Saiu para Entrega';\n      case 'ENTREGUE':\n        return '‚úÖ Entregue';\n      case 'CANCELADO':\n        return '‚ùå Cancelado';\n      default:\n        return status.replace('_', ' ');\n    }\n  }\n};\nOrderTrackerComponent = __decorate([Component({\n  selector: 'app-order-tracker',\n  standalone: true,\n  imports: [CommonModule, TopbarComponent],\n  templateUrl: './order-tracker.component.html',\n  styleUrls: ['./order-tracker.component.css']\n})], OrderTrackerComponent);\nexport { OrderTrackerComponent };","map":{"version":3,"names":["Component","CommonModule","TopbarComponent","OrderTrackerComponent","pedidoService","pedidos","isLoading","error","pedidosSub","constructor","ngOnInit","pedidos$","subscribe","next","data","sort","a","b","id","err","console","loadAllPedidos","ngOnDestroy","unsubscribe","formatarStatus","status","replace","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sources":["C:\\Users\\jvgam\\OneDrive\\√Årea de Trabalho\\ComandaProjeto\\dish-app\\dish-app\\src\\app\\components\\client-area\\order-tracker\\order-tracker.component.ts"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Subscription } from 'rxjs';\r\nimport { TopbarComponent } from '../../admin-area/topbar/topbar.component';\r\nimport { PedidoService } from '../../../services/pedido.service';\r\nimport type { PedidoCompleto } from '../../../services/pedido.service';\r\n\r\n@Component({\r\n  selector: 'app-order-tracker',\r\n  standalone: true,\r\n  imports: [CommonModule, TopbarComponent],\r\n  templateUrl: './order-tracker.component.html',\r\n  styleUrls: ['./order-tracker.component.css']\r\n})\r\nexport class OrderTrackerComponent implements OnInit, OnDestroy {\r\n\r\n  pedidos: PedidoCompleto[] = [];\r\n  isLoading = false;\r\n  error: string | null = null;\r\n\r\n  private pedidosSub!: Subscription;\r\n\r\n  constructor(private pedidoService: PedidoService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.isLoading = true;\r\n\r\n    // Escuta o BehaviorSubject com todos os pedidos\r\n    this.pedidosSub = this.pedidoService.pedidos$.subscribe({\r\n      next: (data: PedidoCompleto[]) => {\r\n        this.pedidos = data.sort((a, b) => (b.id > a.id ? 1 : -1));\r\n        this.isLoading = false;\r\n      },\r\n      error: (err: any) => {\r\n        console.error('Erro ao carregar pedidos:', err);\r\n        this.error = 'N√£o foi poss√≠vel carregar os pedidos.';\r\n        this.isLoading = false;\r\n      }\r\n    });\r\n\r\n    // Carrega todos os pedidos inicialmente\r\n    this.pedidoService.loadAllPedidos();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.pedidosSub) this.pedidosSub.unsubscribe();\r\n  }\r\n\r\n  formatarStatus(status: string): string {\r\n    if (!status) return 'Status indefinido';\r\n\r\n    switch (status) {\r\n      case 'RECEBIDO': return 'üìù Pedido Recebido';\r\n      case 'EM_PREPARO': return 'üë®‚Äçüç≥ Em Preparo';\r\n      case 'PRONTO': return '‚úÖ Pronto';\r\n      case 'SAIU_PARA_ENTREGRA': return 'üöö Saiu para Entrega';\r\n      case 'ENTREGUE': return '‚úÖ Entregue';\r\n      case 'CANCELADO': return '‚ùå Cancelado';\r\n      default: return status.replace('_', ' ');\r\n    }\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,QAA2B,eAAe;AAC5D,SAASC,YAAY,QAAQ,iBAAiB;AAE9C,SAASC,eAAe,QAAQ,0CAA0C;AAWnE,IAAMC,qBAAqB,GAA3B,MAAMA,qBAAqB;EAQZC,aAAA;EANpBC,OAAO,GAAqB,EAAE;EAC9BC,SAAS,GAAG,KAAK;EACjBC,KAAK,GAAkB,IAAI;EAEnBC,UAAU;EAElBC,YAAoBL,aAA4B;IAA5B,KAAAA,aAAa,GAAbA,aAAa;EAAkB;EAEnDM,QAAQA,CAAA;IACN,IAAI,CAACJ,SAAS,GAAG,IAAI;IAErB;IACA,IAAI,CAACE,UAAU,GAAG,IAAI,CAACJ,aAAa,CAACO,QAAQ,CAACC,SAAS,CAAC;MACtDC,IAAI,EAAGC,IAAsB,IAAI;QAC/B,IAAI,CAACT,OAAO,GAAGS,IAAI,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAMA,CAAC,CAACC,EAAE,GAAGF,CAAC,CAACE,EAAE,GAAG,CAAC,GAAG,CAAC,CAAE,CAAC;QAC1D,IAAI,CAACZ,SAAS,GAAG,KAAK;MACxB,CAAC;MACDC,KAAK,EAAGY,GAAQ,IAAI;QAClBC,OAAO,CAACb,KAAK,CAAC,2BAA2B,EAAEY,GAAG,CAAC;QAC/C,IAAI,CAACZ,KAAK,GAAG,uCAAuC;QACpD,IAAI,CAACD,SAAS,GAAG,KAAK;MACxB;KACD,CAAC;IAEF;IACA,IAAI,CAACF,aAAa,CAACiB,cAAc,EAAE;EACrC;EAEAC,WAAWA,CAAA;IACT,IAAI,IAAI,CAACd,UAAU,EAAE,IAAI,CAACA,UAAU,CAACe,WAAW,EAAE;EACpD;EAEAC,cAAcA,CAACC,MAAc;IAC3B,IAAI,CAACA,MAAM,EAAE,OAAO,mBAAmB;IAEvC,QAAQA,MAAM;MACZ,KAAK,UAAU;QAAE,OAAO,oBAAoB;MAC5C,KAAK,YAAY;QAAE,OAAO,kBAAkB;MAC5C,KAAK,QAAQ;QAAE,OAAO,UAAU;MAChC,KAAK,oBAAoB;QAAE,OAAO,sBAAsB;MACxD,KAAK,UAAU;QAAE,OAAO,YAAY;MACpC,KAAK,WAAW;QAAE,OAAO,aAAa;MACtC;QAAS,OAAOA,MAAM,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;IAC1C;EACF;CACD;AA/CYvB,qBAAqB,GAAAwB,UAAA,EAPjC3B,SAAS,CAAC;EACT4B,QAAQ,EAAE,mBAAmB;EAC7BC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAAC7B,YAAY,EAAEC,eAAe,CAAC;EACxC6B,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,+BAA+B;CAC5C,CAAC,C,EACW7B,qBAAqB,CA+CjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}