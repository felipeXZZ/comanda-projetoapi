{"ast":null,"code":"import { CommonModule } from '@angular/common'; // Necessário para *ngFor, *ngIf, | currency\nimport { RouterLink } from '@angular/router'; // Necessário para [routerLink]\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/dish.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = a0 => [\"/edit-dish\", a0];\nfunction DishListComponent_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function DishListComponent_tr_14_Template_button_click_10_listener() {\n      const dish_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteDish(dish_r2.id));\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"a\", 3);\n    i0.ɵɵtext(13, \"Edit\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const dish_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(dish_r2.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(dish_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(dish_r2.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(dish_r2.price);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c0, dish_r2.id));\n  }\n}\nexport let DishListComponent = /*#__PURE__*/(() => {\n  class DishListComponent {\n    dishService;\n    dishes = []; // Array para guardar os pratos vindos da API\n    isLoading = true; // Variável para mostrar um feedback de \"carregando\"\n    error = null; // Para guardar mensagens de erro\n    // 1. Injeta o DishService (que o professor criou) no construtor\n    constructor(dishService) {\n      this.dishService = dishService;\n    }\n    // 2. Este método roda assim que o componente é carregado\n    ngOnInit() {\n      this.loadDishes();\n    }\n    // 3. Método para buscar os pratos da API\n    loadDishes() {\n      this.isLoading = true;\n      this.error = null;\n      this.dishService.getDishes().subscribe({\n        // 4. Se a chamada der Certo:\n        next: data => {\n          this.dishes = data; // Preenche o nosso array\n          this.isLoading = false;\n          console.log('Pratos carregados:', data);\n        },\n        // 5. Se a chamada der Errado:\n        error: err => {\n          console.error('Erro ao buscar pratos:', err);\n          this.error = 'Não foi possível carregar o cardápio. O backend está rodando?';\n          this.isLoading = false;\n        }\n      });\n    }\n    // 6. Método para deletar um prato\n    deleteDish(id) {\n      if (!id) return; // Não faz nada se o ID for indefinido\n      if (confirm('Tem certeza que deseja deletar este prato?')) {\n        this.dishService.deleteDish(id).subscribe({\n          next: () => {\n            console.log('Prato deletado com sucesso');\n            // Remove o prato da lista local para atualizar a tela\n            this.dishes = this.dishes.filter(dish => dish.id !== id);\n          },\n          error: err => {\n            console.error('Erro ao deletar prato:', err);\n            this.error = 'Erro ao deletar o prato.';\n          }\n        });\n      }\n    }\n    static ɵfac = function DishListComponent_Factory(ɵt) {\n      return new (ɵt || DishListComponent)(i0.ɵɵdirectiveInject(i1.DishService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DishListComponent,\n      selectors: [[\"app-dish-list\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 17,\n      vars: 1,\n      consts: [[4, \"ngFor\", \"ngForOf\"], [\"routerLink\", \"/add-dish\"], [3, \"click\"], [3, \"routerLink\"]],\n      template: function DishListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h2\");\n          i0.ɵɵtext(1, \"Dish List\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"table\")(3, \"tr\")(4, \"th\");\n          i0.ɵɵtext(5, \"ID\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"th\");\n          i0.ɵɵtext(7, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"th\");\n          i0.ɵɵtext(9, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"th\");\n          i0.ɵɵtext(11, \"Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"th\");\n          i0.ɵɵtext(13, \"Actions\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(14, DishListComponent_tr_14_Template, 14, 7, \"tr\", 0);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"a\", 1);\n          i0.ɵɵtext(16, \"Add New Dish\");\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"ngForOf\", ctx.dishes);\n        }\n      },\n      dependencies: [CommonModule, i2.NgForOf,\n      // Adiciona os módulos necessários\n      RouterLink],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n  return DishListComponent;\n})();","map":{"version":3,"names":["CommonModule","RouterLink","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","DishListComponent_tr_14_Template_button_click_10_listener","dish_r2","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","deleteDish","id","ɵɵadvance","ɵɵtextInterpolate","name","description","price","ɵɵproperty","ɵɵpureFunction1","_c0","DishListComponent","dishService","dishes","isLoading","error","constructor","ngOnInit","loadDishes","getDishes","subscribe","next","data","console","log","err","confirm","filter","dish","ɵɵdirectiveInject","i1","DishService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","DishListComponent_Template","rf","ctx","ɵɵtemplate","DishListComponent_tr_14_Template","i2","NgForOf","styles"],"sources":["C:\\Users\\Gabriel Reis\\Desktop\\dish-app\\src\\app\\components\\dish-list\\dish-list.component.ts","C:\\Users\\Gabriel Reis\\Desktop\\dish-app\\src\\app\\components\\dish-list\\dish-list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common'; // Necessário para *ngFor, *ngIf, | currency\r\nimport { RouterLink } from '@angular/router'; // Necessário para [routerLink]\r\nimport { Dish, DishService } from '../../services/dish.service'; // Importa o serviço e a interface\r\n\r\n@Component({\r\n  selector: 'app-dish-list',\r\n  standalone: true, // A base do seu professor usa componentes standalone\r\n  imports: [\r\n    CommonModule, // Adiciona os módulos necessários\r\n    RouterLink\r\n  ],\r\n  templateUrl: './dish-list.component.html',\r\n  styleUrls: ['./dish-list.component.css']\r\n})\r\nexport class DishListComponent implements OnInit {\r\n\r\n  dishes: Dish[] = []; // Array para guardar os pratos vindos da API\r\n  isLoading = true; // Variável para mostrar um feedback de \"carregando\"\r\n  error: string | null = null; // Para guardar mensagens de erro\r\n\r\n  // 1. Injeta o DishService (que o professor criou) no construtor\r\n  constructor(private dishService: DishService) {}\r\n\r\n  // 2. Este método roda assim que o componente é carregado\r\n  ngOnInit(): void {\r\n    this.loadDishes();\r\n  }\r\n\r\n  // 3. Método para buscar os pratos da API\r\n  loadDishes(): void {\r\n    this.isLoading = true;\r\n    this.error = null;\r\n\r\n    this.dishService.getDishes().subscribe({\r\n      // 4. Se a chamada der Certo:\r\n      next: (data) => {\r\n        this.dishes = data; // Preenche o nosso array\r\n        this.isLoading = false;\r\n        console.log('Pratos carregados:', data);\r\n      },\r\n      // 5. Se a chamada der Errado:\r\n      error: (err) => {\r\n        console.error('Erro ao buscar pratos:', err);\r\n        this.error = 'Não foi possível carregar o cardápio. O backend está rodando?';\r\n        this.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  // 6. Método para deletar um prato\r\n  deleteDish(id: number | undefined): void {\r\n    if (!id) return; // Não faz nada se o ID for indefinido\r\n\r\n    if (confirm('Tem certeza que deseja deletar este prato?')) {\r\n      this.dishService.deleteDish(id).subscribe({\r\n        next: () => {\r\n          console.log('Prato deletado com sucesso');\r\n          // Remove o prato da lista local para atualizar a tela\r\n          this.dishes = this.dishes.filter(dish => dish.id !== id);\r\n        },\r\n        error: (err) => {\r\n          console.error('Erro ao deletar prato:', err);\r\n          this.error = 'Erro ao deletar o prato.';\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n","<!-- src/app/components/dish-list/dish-list.component.html -->\r\n\r\n<h2>Dish List</h2>\r\n<table>\r\n  <tr>\r\n    <th>ID</th>\r\n    <th>Name</th>\r\n    <th>Description</th>\r\n    <th>Price</th>\r\n    <th>Actions</th>\r\n  </tr>\r\n  <tr *ngFor=\"let dish of dishes\">\r\n    <td>{{ dish.id }}</td>\r\n    <td>{{ dish.name }}</td>\r\n    <td>{{ dish.description }}</td>\r\n    <td>{{ dish.price }}</td>\r\n    <td>\r\n      <button (click)=\"deleteDish(dish.id!)\">Delete</button>\r\n      <a [routerLink]=\"['/edit-dish', dish.id]\">Edit</a>\r\n    </td>\r\n  </tr>\r\n</table>\r\n<a routerLink=\"/add-dish\">Add New Dish</a>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}